{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/seamus/BootCamp/bootcamp-project-2025/milestone-4/src/database/db.ts"],"sourcesContent":["// db.ts\nimport mongoose from \"mongoose\";\nimport Blog from \"./blogSchema\";\n\nconst url: string = process.env.MONGO_URI as string;\nlet connection: typeof mongoose;\n\n/**\n * Makes a connection to a MongoDB database. If a connection already exists, does nothing\n * Call this function at the start of api routes and data fetches\n * @returns {Promise<typeof mongoose>}\n */\nconst connectDB = async () => {\n  if (!connection) {\n    connection = await mongoose.connect(url);\n    return connection;\n  }\n};\n\nexport default connectDB;\n\n/*\nexport async function getBlogs(){\n\tawait connectDB() // function from db.ts before\n\n\ttry {\n\t\t\t// query for all blogs and sort by date\n\t\t\n\t\tconst docs = await Blog.find().\n\t\tsort({ date: -1 })\n     .select(\"-_id -__v\")     \n        .lean()                   \n        .orFail();\n\n\t\t//Make it normal \n\t\treturn docs.map((b: any) => ({\n      \ttitle: b.title,\n      \tslug: b.slug,\n      \tdescription: b.description,\n      \timage: b.image,\n      \timageAlt: b.imageAlt ?? `Preview image for ${b.title}`,\n      \tfinalScore: b.finalScore,\n      \tscorers: b.scorers,\n      \tvideoLink: b.videoLink,\n      \tdate: new Date(b.date).toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n      \t})\n\n\n    \t}));\n\n\t\t\t// send a response as the blogs as the message\n\t \n\t} catch (err) {\n\t    console.error(\"error fetching blogs\",err);\n\t\treturn [];\n\t}\n}\n*/"],"names":[],"mappings":"AAAA,QAAQ;;;;;AACR;;AAGA,MAAM,MAAc,QAAQ,GAAG,CAAC,SAAS;AACzC,IAAI;AAEJ;;;;CAIC,GACD,MAAM,YAAY;IAChB,IAAI,CAAC,YAAY;QACf,aAAa,MAAM,oHAAQ,CAAC,OAAO,CAAC;QACpC,OAAO;IACT;AACF;uCAEe;CAEf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA","debugId":null}},
    {"offset": {"line": 111, "column": 3}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 115, "column": 0}, "map": {"version":3,"sources":["file:///Users/seamus/BootCamp/bootcamp-project-2025/milestone-4/src/database/commentSchema.ts"],"sourcesContent":["import mongoose, {Schema} from \"mongoose\"\nexport type IComment = {\n\t\tuser: string;\n\t\tcomment: string;\n\t\ttime: Date;\n}\n\nexport const commentSchema = new Schema<IComment>({\n    user: {type: String},\n    comment: {type:String},\n    time: {type: Date}\n})\n\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM,gBAAgB,IAAI,mHAAM,CAAW;IAC9C,MAAM;QAAC,MAAM;IAAM;IACnB,SAAS;QAAC,MAAK;IAAM;IACrB,MAAM;QAAC,MAAM;IAAI;AACrB","debugId":null}},
    {"offset": {"line": 136, "column": 0}, "map": {"version":3,"sources":["file:///Users/seamus/BootCamp/bootcamp-project-2025/milestone-4/src/database/blogSchema.ts"],"sourcesContent":["import mongoose, {Schema} from \"mongoose\"\nimport { commentSchema, IComment } from \"./commentSchema\";\n\n//typescript type\ntype Blog = {\n    title:  string;\n    date: Date;\n    description: string;\n    image: string;\n    imageAlt: string;\n    slug: string;\n    finalScore: string;\n    scorers: string[];\n    videoLink: string;\n    comments: IComment[];\n    \n}\n\n\n\n//mongoose schema\nexport const blogSchema = new Schema<Blog>({\n    title: {type: String, required: true},\n    date: { type: Date, required: false, default: new Date()},\n    description: { type: String, required: true },\n    image: { type: String, required: true },\n    imageAlt: { type: String, required: true, default:\"\"},\n    slug: { type: String, required: true },\n    finalScore: { type: String, required: true },\n    scorers: { type: [String], required: true},\n    videoLink: { type: String, required: true },\n    comments: [commentSchema]\n})\n\n\n// defining the collection and model\nconst Blog = mongoose.models['blogs'] ||\n    mongoose.model('blogs', blogSchema);\n\nexport default Blog;"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAoBO,MAAM,aAAa,IAAI,mHAAM,CAAO;IACvC,OAAO;QAAC,MAAM;QAAQ,UAAU;IAAI;IACpC,MAAM;QAAE,MAAM;QAAM,UAAU;QAAO,SAAS,IAAI;IAAM;IACxD,aAAa;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC5C,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,UAAU;QAAE,MAAM;QAAQ,UAAU;QAAM,SAAQ;IAAE;IACpD,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,YAAY;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC3C,SAAS;QAAE,MAAM;YAAC;SAAO;QAAE,UAAU;IAAI;IACzC,WAAW;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC1C,UAAU;QAAC,gNAAa;KAAC;AAC7B;AAGA,oCAAoC;AACpC,MAAM,OAAO,oHAAQ,CAAC,MAAM,CAAC,QAAQ,IACjC,oHAAQ,CAAC,KAAK,CAAC,SAAS;uCAEb","debugId":null}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///Users/seamus/BootCamp/bootcamp-project-2025/milestone-4/src/app/api/blogs/route.ts"],"sourcesContent":["import { NextResponse } from \"next/server\";\nimport connectDB from \"@/src/database/db\";\nimport Blog from \"@/src/database/blogSchema\";\n\nexport async function GET() {\n  try {\n    await connectDB();\n\n    // empty filter + projection to keep only what you need\n    const docs = await Blog.find(\n      {},\n      { title: 1, slug: 1, date: 1, description: 1, image: 1, imageAlt: 1, image_alt: 1 }\n    )\n      .sort({ date: -1 })\n      .lean(); // no .orFail() needed for find()\n\n    const blogs = docs.map((d: any) => ({\n      _id: d._id?.toString?.() ?? \"\", // keep _id since we didn't exclude it\n      title: String(d.title ?? \"\"),\n      slug: String(d.slug ?? \"\"),\n      description: d.description ?? \"\",\n      image: d.image ?? \"\",\n      // support either imageAlt or image_alt in DB\n      imageAlt: d.imageAlt ?? d.image_alt ?? \"\",\n      date: d.date\n        ? new Date(d.date).toLocaleDateString(\"en-US\", { year: \"numeric\", month: \"long\", day: \"numeric\" })\n        : \"\",\n    }));\n\n    return NextResponse.json(blogs, { status: 200 });\n  } catch (err) {\n    console.error(\"GET /api/blogs error:\", err);\n    return NextResponse.json({ message: \"Failed\" }, { status: 500 });\n  }\n}\n\n\n    "],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,IAAA,+LAAS;QAEf,uDAAuD;QACvD,MAAM,OAAO,MAAM,uMAAI,CAAC,IAAI,CAC1B,CAAC,GACD;YAAE,OAAO;YAAG,MAAM;YAAG,MAAM;YAAG,aAAa;YAAG,OAAO;YAAG,UAAU;YAAG,WAAW;QAAE,GAEjF,IAAI,CAAC;YAAE,MAAM,CAAC;QAAE,GAChB,IAAI,IAAI,iCAAiC;QAE5C,MAAM,QAAQ,KAAK,GAAG,CAAC,CAAC,IAAW,CAAC;gBAClC,KAAK,EAAE,GAAG,EAAE,gBAAgB;gBAC5B,OAAO,OAAO,EAAE,KAAK,IAAI;gBACzB,MAAM,OAAO,EAAE,IAAI,IAAI;gBACvB,aAAa,EAAE,WAAW,IAAI;gBAC9B,OAAO,EAAE,KAAK,IAAI;gBAClB,6CAA6C;gBAC7C,UAAU,EAAE,QAAQ,IAAI,EAAE,SAAS,IAAI;gBACvC,MAAM,EAAE,IAAI,GACR,IAAI,KAAK,EAAE,IAAI,EAAE,kBAAkB,CAAC,SAAS;oBAAE,MAAM;oBAAW,OAAO;oBAAQ,KAAK;gBAAU,KAC9F;YACN,CAAC;QAED,OAAO,6MAAY,CAAC,IAAI,CAAC,OAAO;YAAE,QAAQ;QAAI;IAChD,EAAE,OAAO,KAAK;QACZ,QAAQ,KAAK,CAAC,yBAAyB;QACvC,OAAO,6MAAY,CAAC,IAAI,CAAC;YAAE,SAAS;QAAS,GAAG;YAAE,QAAQ;QAAI;IAChE;AACF","debugId":null}}]
}