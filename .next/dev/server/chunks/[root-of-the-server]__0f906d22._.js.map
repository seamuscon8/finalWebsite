{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 52, "column": 0}, "map": {"version":3,"sources":["file:///Users/seamus/BootCamp/bootcamp-project-2025/milestone-4/src/database/commentSchema.ts"],"sourcesContent":["import mongoose, {Schema} from \"mongoose\"\nexport type IComment = {\n\t\tuser: string;\n\t\tcomment: string;\n\t\ttime: Date;\n}\n\nexport const commentSchema = new Schema<IComment>({\n    user: {type: String},\n    comment: {type:String},\n    time: {type: Date}\n})\n\n"],"names":[],"mappings":";;;;AAAA;;AAOO,MAAM,gBAAgB,IAAI,mHAAM,CAAW;IAC9C,MAAM;QAAC,MAAM;IAAM;IACnB,SAAS;QAAC,MAAK;IAAM;IACrB,MAAM;QAAC,MAAM;IAAI;AACrB","debugId":null}},
    {"offset": {"line": 73, "column": 0}, "map": {"version":3,"sources":["file:///Users/seamus/BootCamp/bootcamp-project-2025/milestone-4/src/database/blogSchema.ts"],"sourcesContent":["import mongoose, {Schema} from \"mongoose\"\nimport { commentSchema, IComment } from \"./commentSchema\";\n\n//typescript type\ntype Blog = {\n    title:  string;\n    date: Date;\n    description: string;\n    image: string;\n    imageAlt: string;\n    slug: string;\n    finalScore: string;\n    scorers: string[];\n    videoLink: string;\n    comments: IComment[];\n    \n}\n\n\n\n//mongoose schema\nexport const blogSchema = new Schema<Blog>({\n    title: {type: String, required: true},\n    date: { type: Date, required: false, default: new Date()},\n    description: { type: String, required: true },\n    image: { type: String, required: true },\n    imageAlt: { type: String, required: true, default:\"\"},\n    slug: { type: String, required: true },\n    finalScore: { type: String, required: true },\n    scorers: { type: [String], required: true},\n    videoLink: { type: String, required: true },\n    comments: [commentSchema]\n})\n\n\n// defining the collection and model\nconst Blog = mongoose.models['blogs'] ||\n    mongoose.model('blogs', blogSchema);\n\nexport default Blog;"],"names":[],"mappings":";;;;;;AAAA;AACA;;;AAoBO,MAAM,aAAa,IAAI,mHAAM,CAAO;IACvC,OAAO;QAAC,MAAM;QAAQ,UAAU;IAAI;IACpC,MAAM;QAAE,MAAM;QAAM,UAAU;QAAO,SAAS,IAAI;IAAM;IACxD,aAAa;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC5C,OAAO;QAAE,MAAM;QAAQ,UAAU;IAAK;IACtC,UAAU;QAAE,MAAM;QAAQ,UAAU;QAAM,SAAQ;IAAE;IACpD,MAAM;QAAE,MAAM;QAAQ,UAAU;IAAK;IACrC,YAAY;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC3C,SAAS;QAAE,MAAM;YAAC;SAAO;QAAE,UAAU;IAAI;IACzC,WAAW;QAAE,MAAM;QAAQ,UAAU;IAAK;IAC1C,UAAU;QAAC,gNAAa;KAAC;AAC7B;AAGA,oCAAoC;AACpC,MAAM,OAAO,oHAAQ,CAAC,MAAM,CAAC,QAAQ,IACjC,oHAAQ,CAAC,KAAK,CAAC,SAAS;uCAEb","debugId":null}},
    {"offset": {"line": 135, "column": 0}, "map": {"version":3,"sources":["file:///Users/seamus/BootCamp/bootcamp-project-2025/milestone-4/src/database/db.ts"],"sourcesContent":["// db.ts\nimport mongoose from \"mongoose\";\nimport Blog from \"./blogSchema\";\n\nconst url: string = process.env.MONGO_URI as string;\nlet connection: typeof mongoose;\n\n/**\n * Makes a connection to a MongoDB database. If a connection already exists, does nothing\n * Call this function at the start of api routes and data fetches\n * @returns {Promise<typeof mongoose>}\n */\nconst connectDB = async () => {\n  if (!connection) {\n    connection = await mongoose.connect(url);\n    return connection;\n  }\n};\n\nexport default connectDB;\n\n/*\nexport async function getBlogs(){\n\tawait connectDB() // function from db.ts before\n\n\ttry {\n\t\t\t// query for all blogs and sort by date\n\t\t\n\t\tconst docs = await Blog.find().\n\t\tsort({ date: -1 })\n     .select(\"-_id -__v\")     \n        .lean()                   \n        .orFail();\n\n\t\t//Make it normal \n\t\treturn docs.map((b: any) => ({\n      \ttitle: b.title,\n      \tslug: b.slug,\n      \tdescription: b.description,\n      \timage: b.image,\n      \timageAlt: b.imageAlt ?? `Preview image for ${b.title}`,\n      \tfinalScore: b.finalScore,\n      \tscorers: b.scorers,\n      \tvideoLink: b.videoLink,\n      \tdate: new Date(b.date).toLocaleDateString(\"en-US\", {\n        year: \"numeric\",\n        month: \"long\",\n        day: \"numeric\",\n      \t})\n\n\n    \t}));\n\n\t\t\t// send a response as the blogs as the message\n\t \n\t} catch (err) {\n\t    console.error(\"error fetching blogs\",err);\n\t\treturn [];\n\t}\n}\n*/"],"names":[],"mappings":"AAAA,QAAQ;;;;;AACR;;AAGA,MAAM,MAAc,QAAQ,GAAG,CAAC,SAAS;AACzC,IAAI;AAEJ;;;;CAIC,GACD,MAAM,YAAY;IAChB,IAAI,CAAC,YAAY;QACf,aAAa,MAAM,oHAAQ,CAAC,OAAO,CAAC;QACpC,OAAO;IACT;AACF;uCAEe;CAEf;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuCA","debugId":null}},
    {"offset": {"line": 194, "column": 3}, "map": {"version":3,"sources":[],"names":[],"mappings":"A"}},
    {"offset": {"line": 198, "column": 0}, "map": {"version":3,"sources":["file:///Users/seamus/BootCamp/bootcamp-project-2025/milestone-4/src/app/api/blogs/%5Bslug%5D/comments/route.ts"],"sourcesContent":["import {NextResponse} from \"next/server\";\nimport Blog from \"@/src/database/blogSchema\"\nimport connectDB from \"@/src/database/db\";\n\nexport async function POST(\n    req: Request, {params}: {params: Promise<{ slug: string }>}\n) {\n\n\n    try{\n        await connectDB();\n\n\n        const {slug} = await params;\n     \n        \n\n        const body = await req.json();\n        const {user, comment} = body;\n\n        if( !user || !comment){\n            return NextResponse.json(\n                {message: \"user and comment are required\"},\n                {status: 400}\n            )\n        }\n\n        const newComment = {\n            user,\n            comment,\n            time: new Date()\n        };\n\n        const blogs = await Blog.find({}, \"slug\").lean();\n        console.log(\"ðŸ”Ž All slugs in DB =\", blogs);\n\n        const updatedBlog = await Blog.findOneAndUpdate(\n            {slug},\n            {$push: {comments: newComment}},\n            {new: true}\n        ).lean();\n\n        if(!updatedBlog) {\n            return NextResponse.json(\n                {message: \"Blog not found\"},\n                {status: 404}\n            );\n        }\n\n        return NextResponse.json(updatedBlog);\n\n\n          } catch (err) {\n    console.error(\"Error in POST /api/blogs/[slug]/comments:\", err);\n    return NextResponse.json(\n      { message: \"Server error\" },\n      { status: 500 }\n    );\n  }\n\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;AACA;;;;AAEO,eAAe,KAClB,GAAY,EAAE,EAAC,MAAM,EAAsC;IAI3D,IAAG;QACC,MAAM,IAAA,+LAAS;QAGf,MAAM,EAAC,IAAI,EAAC,GAAG,MAAM;QAIrB,MAAM,OAAO,MAAM,IAAI,IAAI;QAC3B,MAAM,EAAC,IAAI,EAAE,OAAO,EAAC,GAAG;QAExB,IAAI,CAAC,QAAQ,CAAC,SAAQ;YAClB,OAAO,6MAAY,CAAC,IAAI,CACpB;gBAAC,SAAS;YAA+B,GACzC;gBAAC,QAAQ;YAAG;QAEpB;QAEA,MAAM,aAAa;YACf;YACA;YACA,MAAM,IAAI;QACd;QAEA,MAAM,QAAQ,MAAM,uMAAI,CAAC,IAAI,CAAC,CAAC,GAAG,QAAQ,IAAI;QAC9C,QAAQ,GAAG,CAAC,wBAAwB;QAEpC,MAAM,cAAc,MAAM,uMAAI,CAAC,gBAAgB,CAC3C;YAAC;QAAI,GACL;YAAC,OAAO;gBAAC,UAAU;YAAU;QAAC,GAC9B;YAAC,KAAK;QAAI,GACZ,IAAI;QAEN,IAAG,CAAC,aAAa;YACb,OAAO,6MAAY,CAAC,IAAI,CACpB;gBAAC,SAAS;YAAgB,GAC1B;gBAAC,QAAQ;YAAG;QAEpB;QAEA,OAAO,6MAAY,CAAC,IAAI,CAAC;IAGvB,EAAE,OAAO,KAAK;QACpB,QAAQ,KAAK,CAAC,6CAA6C;QAC3D,OAAO,6MAAY,CAAC,IAAI,CACtB;YAAE,SAAS;QAAe,GAC1B;YAAE,QAAQ;QAAI;IAElB;AAEF","debugId":null}}]
}